#!/bin/sh
# Type a script or drag a script file from your workspace to insert its path.
# This script automatically sets the version and short version string of
# an Xcode project from the Git repository containing the project.
#

set -o errexit
set -o nounset

BUILD=$(git rev-list --no-merges --count HEAD)
BUILD=$(($BUILD + 1000))


if [ -z "$BUILD" ]; then
echo "error: git version could not be determined!"
exit 1
fi

echo "${BUILD}"

sed 's/\$\$REVISION\$\$/'"${BUILD}"'/g; s/\$\$WARNING\$\$/IMPORTANT! DO NOT EDIT THIS FILE!/g; s/\$\$INSTRUCTIONS\$\$/Edit Generated_Version.template.xcconfig instead. This file is generated in the Inject Version Numbers target/g' "${PROJECT_DIR}/Configuration/Generated_Version.xcconfig.template" > "${PROJECT_DIR}/GeneratedConfig/Generated_Version.xcconfig"

